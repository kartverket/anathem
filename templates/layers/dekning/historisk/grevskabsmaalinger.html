<%include file="/functions/vector.html" />
<% vars['labelScaleLimit'] = 100000 %>
<%include file="/styles/dekning/historisk.html" />

var hgrelayer,
    hgreHighlightDekningCtrl,
    hgreSelectDekningCtrl;

hgrelayer = new OpenLayers.Layer.Vector(
  "Historiske Grevskabsm&aring;linger",
  {
    shortid: "hist.gre", 
    styleMap: dekningHStyle, 
    visibility: ${visible} 
  }
);

request = OpenLayers.Request.GET({
  url: "/json/dekning/historisk/grevskabsmaalinger.json",
  callback: function (request) {
    var geojson_format,
        features;

    geojson_format = new OpenLayers.Format.GeoJSON({
      'internalProjection': mapProj,
      'externalProjection': proj['32633'] 
    });
    features = geojson_format.read(request.responseText);

    hgrelayer.addFeatures(features);
  }
});

map.addLayers([hgrelayer]);

hgre_selectBlad = function (feature) {
  alert(feature.attributes.Kartnavn);
};

NK.functions.vector.addVectorControls(map, hgrelayer, hgre_selectBlad);
