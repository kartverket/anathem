<%include file="/functions/vector.html" />
<% vars['labelScaleLimit'] = 2000000 %>
<%include file="/styles/dekning/historisk.html" />

var hgenlayer,
    hgenHighlightDekningCtrl,
    hgenSelectDekningCtrl;

hgenlayer = new OpenLayers.Layer.Vector(
  "Historiske Generalkart",
  {
    shortid: "hist.gen", 
    styleMap: dekningHStyle, 
    visibility: ${visible} 
  }
);

request = OpenLayers.Request.GET({
  url: "/json/dekning/historisk/generalkart.json",
  callback: function (request) {
    var geojson_format,
        features;

    geojson_format = new OpenLayers.Format.GeoJSON({
      'internalProjection': mapProj,
      'externalProjection': proj['32633'] 
    });
    features = geojson_format.read(request.responseText);

    hgenlayer.addFeatures(features);
  }
});

map.addLayers([hgenlayer]);

hgen_selectBlad = function (feature) {
  alert(feature.attributes.Kartnavn);
};

NK.functions.vector.addVectorControls(map, hgenlayer, hgen_selectBlad);
