<%include file="/functions/vector.html" />
<% vars['labelScaleLimit'] = 500000 %>
<%include file="/styles/dekning/historisk.html" />

var hreklayer,
    hrekHighlightDekningCtrl,
    hrekSelectDekningCtrl;

hreklayer = new OpenLayers.Layer.Vector(
  "Historiske Rektangelm&aring;linger",
  {
    shortid: "hist.rek", 
    styleMap: dekningHStyle, 
    visibility: ${visible} 
  }
);

request = OpenLayers.Request.GET({
  url: "/json/dekning/historisk/rektangelmaalinger.json",
  callback: function (request) {
    var geojson_format,
        features;

    geojson_format = new OpenLayers.Format.GeoJSON({
      'internalProjection': mapProj,
      'externalProjection': proj['32633'] 
    });
    features = geojson_format.read(request.responseText);

    hreklayer.addFeatures(features);
  }
});

map.addLayers([hreklayer]);

hrek_selectBlad = function (feature) {
  alert(feature.attributes.Kartnavn);
};

NK.functions.vector.addVectorControls(map, hreklayer, hrek_selectBlad);
