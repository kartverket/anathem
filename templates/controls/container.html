(function (context, containerParam) {
	var parentContainer = document.body,
		className = "toolbar",
		container;
% if className:
	className = "${className} toolbar";
% endif	

	// set parentContainer if divControllerContainer is set
	if (containerParam) {
		parentContainer = containerParam;
		className = "panel";
% if className:
	className = "${className} panel";
% endif	

	}
	
	container = document.createElement("div");

	% if id:
	container.id = "${id}";
	% endif


	% if name:
		% if toggleButton:
			var header = document.createElement("button");
		% else:
			var header = document.createElement("div");
		% endif

		header.className = "panel-name";
		var name = document.createElement('span');
		name.innerHTML = "${name}";

		% if svgIcon:
			header.innerHTML = OpenLayers.Util.hideFromOldIE('${svgIcon}');
		%endif

		header.appendChild(name);
		container.appendChild(header);
		OpenLayers.Event.observe(header, 'click', OpenLayers.Function.bind(function (evt) {
			if (OpenLayers.Element.hasClass(this,'minified')) {
				OpenLayers.Element.removeClass(this, 'minified');
			} else {
				OpenLayers.Element.addClass(this, 'minified');
        map.getControlsByClass('OpenLayers.Control.Draw')[0].hideControls(true);
        map.getControlsByClass('OpenLayers.Control.OverlayGroupPanel')[0].hideControls(true);
        map.getControlsByClass('OpenLayers.Control.HeightProfile')[0].hideControls(true);
        map.getControlsByClass('OpenLayers.Control.Transformations')[0].hideControls(true);
			}
		}, container));
	% endif


	container.className = className;
	parentContainer.appendChild(container); 

	% if controls:
	${controls}
	% endif
}(controlContext, container));
